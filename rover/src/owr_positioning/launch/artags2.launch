<launch>

  <!-- Create a static transform for each ar tag -->
    <node pkg="tf" type="static_transform_publisher" name="marker3" args="3 1 0 0 0 0 odom /marker3 100">
    </node>
    <node pkg="tf" type="static_transform_publisher" name="marker0" args="3 2 0 0 0 0 odom /marker0 100">
    </node>


  <!-- Setup the video stream from the camera -->
   <arg name="camera_name" default="camera2" />
   <!-- video_stream_provider can be a number as a video device or a url of a video stream -->
   <arg name="video_stream_provider" default="/dev/video1" />
   <!-- frames per second to query the camera for -->
   <arg name="fps" default="60" />
   <!-- frame_id for the camera -->
   <arg name="frame_id" default="camera_link" />
   <!-- By default, calibrations are stored to file://${ROS_HOME}/camera_info/${NAME}.yaml
   To use your own fill this arg with the corresponding url, e.g.:
   "file:///$(find your_camera_package)/config/your_camera.yaml" -->
    <arg name="camera_info_url" default="file:///home/bluesat/Desktop/cameraCalibration.yaml" />
   <!-- flip the image horizontally (mirror it) -->
   <arg name="flip_horizontal" default="false" />
   <!-- flip the image vertically -->
   <arg name="flip_vertical" default="false" />
    <!-- force width and height, 0 means no forcing -->
    <arg name="width" default="0"/>
    <arg name="height" default="0"/>
    <arg name="buffer_queue_size" default="1"/>
   <!-- if show a image_view window subscribed to the generated stream -->
 <arg name="visualize" default="true"/>

   
    <!-- images will be published at /camera_name/image with the image transports plugins (e.g.: compressed) installed -->
    <group ns="ar_camera_2">
     <node pkg="video_stream_opencv" type="video_stream" name="ar_camera_2_stream" output="screen"> 
      <remap from="camera" to="image_raw" />
      <param name="camera_name" type="string" value="ar_camera_2" />
         <param name="video_stream_provider" type="string" value="/dev/video1" />
         <param name="fps" type="int" value="$(arg fps)" />
         <param name="frame_id" type="string" value="ar_camera_link_2" />
         <param name="camera_info_url" type="string" value="file:///home/blusat/Desktop/cameraCalibration2.yaml" />
         <param name="buffer_queue_size" type="int" value="$(arg buffer_queue_size)" />
         <param name="flip_horizontal" type="bool" value="$(arg flip_horizontal)" />
         <param name="flip_vertical" type="bool" value="$(arg flip_vertical)" />
         <param name="width" type="int" value="$(arg width)" />
         <param name="height" type="int" value="$(arg height)" />
     </node>
     

 </group>
 
    <!-- images will be published at /camera_name/image with the image transports plugins (e.g.: compressed) installed -->
    <group ns="ar_camera_1">
     <node pkg="video_stream_opencv" type="video_stream" name="ar_camera_1_stream" output="screen"> 
      <remap from="camera" to="image_raw" />
      <param name="camera_name" type="string" value="ar_camera_1" />
         <param name="video_stream_provider" type="string" value="/dev/video0" />
         <param name="fps" type="int" value="$(arg fps)" />
         <param name="frame_id" type="string" value="ar_camera_link_1" />
         <param name="camera_info_url" type="string" value="file:///home/wmpmiles/bluesat/owr_software/rover/calibration_files/ar_camera_1.yaml" />
         <param name="buffer_queue_size" type="int" value="$(arg buffer_queue_size)" />
         <param name="flip_horizontal" type="bool" value="$(arg flip_horizontal)" />
         <param name="flip_vertical" type="bool" value="$(arg flip_vertical)" />
         <param name="width" type="int" value="$(arg width)" />
         <param name="height" type="int" value="$(arg height)" />
     </node>
     

 </group>
 
 
  <!-- Set up the ar_track_alvar package to scan for ar tags -->
    <arg name="marker_size" default="21.1" />
    <arg name="max_new_marker_error" default="0.06" />
    <arg name="max_track_error" default="0.15" />
    <arg name="cam_image_topic" default="/camera2/image_raw" />
    <arg name="cam_info_topic" default="/camera2/camera_info" />
    <arg name="output_frame" default="/base_link" />
    

    <node name="ar_track_alvar_2" pkg="ar_track_alvar" type="individualMarkersNoKinect" respawn="false" output="screen">
      <param name="marker_size"           type="double" value="$(arg marker_size)" />
      <param name="max_new_marker_error"  type="double" value="$(arg max_new_marker_error)" />
      <param name="max_track_error"       type="double" value="$(arg max_track_error)" />
      <param name="output_frame"          type="string" value="$(arg output_frame)" />

      <remap from="camera_image"  to="/ar_camera_2/image_raw" />
      <remap from="camera_info"   to="/ar_camera_2/camera_info" />
  </node>


    <node name="ar_track_alvar_1" pkg="ar_track_alvar" type="individualMarkersNoKinect" respawn="false" output="screen">
      <param name="marker_size"           type="double" value="$(arg marker_size)" />
      <param name="max_new_marker_error"  type="double" value="$(arg max_new_marker_error)" />
      <param name="max_track_error"       type="double" value="$(arg max_track_error)" />
      <param name="output_frame"          type="string" value="$(arg output_frame)" />

      <remap from="camera_image"  to="/ar_camera_1/image_raw" />
      <remap from="camera_info"   to="/ar_camera_1/camera_info" />
  </node>

  <!-- <node pkg="owr_positioning" type="artags" name="artags2" output="screen"/> -->
   
</launch>
